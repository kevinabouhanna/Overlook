---
import MainLayout from '../../layouts/MainLayout.astro';
import { servicesMap } from '../../data/services.js';
import type { Service, ServiceFeature, ServicesMap } from '../../types/services';

// Using the imported servicesMap
/*
const servicesMap = {
  'sales-hiring': {
    title: 'Sales Hiring',
    description: 'Find and hire the right sales talent for your organization.',
    image: 'https://images.unsplash.com/photo-1551836022-d5d88e9218df?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
    longDescription: 'Our Sales Hiring service helps you identify, attract, and hire top sales talent that fits your company culture and goals. We use a data-driven approach to assess candidates and build high-performing sales teams.',
    benefits: [
      'Reduce hiring mistakes and turnover',
      'Identify candidates with the right skills and cultural fit',
      'Streamline your hiring process',
      'Build a high-performing sales team'
    ],
    features: [
      {
        title: 'Sales Talent Assessment',
        description: 'We use proven assessment tools to evaluate candidates\' sales aptitude, personality traits, and cultural fit.'
      },
      {
        title: 'Candidate Sourcing',
        description: 'We help you find and attract top sales talent through our extensive network and targeted recruitment strategies.'
      },
      {
        title: 'Interview Process Design',
        description: 'We design a structured interview process that effectively evaluates candidates\' skills, experience, and potential.'
      },
      {
        title: 'Onboarding Program',
        description: 'We develop a comprehensive onboarding program that gets new hires up to speed quickly and sets them up for success.'
      }
    ]
  },
  'sales-training': {
    title: 'Sales Training',
    description: 'Equip your team with the skills they need to succeed.',
    image: 'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
    longDescription: 'Our Sales Training programs are designed to equip your team with the skills, knowledge, and confidence they need to excel. We offer customized training solutions that address your specific challenges and goals.',
    benefits: [
      'Improve sales skills and performance',
      'Increase win rates and deal sizes',
      'Reduce sales cycle length',
      'Build team confidence and motivation'
    ],
    features: [
      {
        title: 'Customized Training Programs',
        description: 'We develop training programs tailored to your team\'s specific needs, industry, and sales process.'
      },
      {
        title: 'Sales Methodology Implementation',
        description: 'We help you implement proven sales methodologies that align with your business model and customer journey.'
      },
      {
        title: 'Role-Specific Skill Development',
        description: 'We provide targeted training for different sales roles, from SDRs to account executives to sales managers.'
      },
      {
        title: 'Ongoing Coaching',
        description: 'We offer ongoing coaching and reinforcement to ensure that new skills are applied and sustained over time.'
      }
    ]
  },
  'sales-process': {
    title: 'Sales Process Optimization',
    description: 'Streamline your sales operations for maximum efficiency.',
    image: 'https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
    longDescription: 'Our Sales Process Optimization service helps you streamline your sales operations, eliminate bottlenecks, and maximize efficiency. We analyze your current process and implement improvements that drive results.',
    benefits: [
      'Streamline your sales workflow',
      'Reduce administrative burden on sales reps',
      'Improve handoffs between teams',
      'Increase overall sales efficiency'
    ],
    features: [
      {
        title: 'Sales Process Audit',
        description: 'We conduct a thorough audit of your current sales process to identify strengths, weaknesses, and opportunities for improvement.'
      },
      {
        title: 'CRM Implementation and Optimization',
        description: 'We help you implement or optimize your CRM to better support your sales process and provide valuable insights.'
      },
      {
        title: 'Sales Enablement Tools',
        description: 'We integrate tools and technologies that make your sales team more effective and efficient.'
      },
      {
        title: 'Process Automation',
        description: 'We identify opportunities to automate repetitive tasks and streamline workflows to free up more selling time.'
      }
    ]
  },
  'performance-metrics': {
    title: 'Performance Metrics',
    description: 'Measure and improve your sales team\'s performance.',
    image: 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
    longDescription: 'Our Performance Metrics service helps you measure and improve your sales team\'s performance through data-driven insights. We develop KPIs, dashboards, and coaching frameworks that drive continuous improvement.',
    benefits: [
      'Gain visibility into sales performance',
      'Identify areas for improvement',
      'Make data-driven decisions',
      'Drive continuous improvement'
    ],
    features: [
      {
        title: 'KPI Development',
        description: 'We help you define and track the right key performance indicators (KPIs) for your sales organization.'
      },
      {
        title: 'Performance Dashboard Creation',
        description: 'We build dashboards that provide real-time visibility into sales performance at individual, team, and organizational levels.'
      },
      {
        title: 'Data-Driven Coaching',
        description: 'We develop coaching frameworks that use performance data to guide targeted skill development.'
      },
      {
        title: 'Incentive Program Design',
        description: 'We design incentive programs that motivate the right behaviors and drive desired outcomes.'
      }
    ]
  }
};*/

// Define the getStaticPaths function to pre-generate all service pages at build time
export function getStaticPaths() {
  // Type assertion for servicesMap
  const typedServicesMap = servicesMap as ServicesMap;

  // Return an array of objects with the params for each service page
  return Object.keys(typedServicesMap).map((serviceId: string) => {
    // Type guard: Ensure serviceId is a valid key in typedServicesMap
    if (!(serviceId in typedServicesMap)) {
      throw new Error(`Invalid service ID: ${serviceId}`);
    }

    return {
      params: { serviceId },
      props: { service: typedServicesMap[serviceId] }
    };
  });
}

// Get the service data from props
const { service } = Astro.props as { service: Service };

// Set the page metadata
const title = `${service.title} - Overlook Sales Consulting`;
const description = service.longDescription.substring(0, 160);
---

<MainLayout
  title={title}
  description={description}
  ogImage={service.image}
>
  <!-- Hero Section -->
  <section class="relative h-96">
    <div class="absolute inset-0">
      <img
        src={service.image}
        alt={service.title}
        class="w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-black/50"></div>
    </div>
    <div class="container mx-auto px-4 h-full relative z-10">
      <div class="flex flex-col justify-center h-full">
        <h1 class="text-4xl md:text-5xl font-bold mb-4 text-white">{service.title}</h1>
        <p class="text-xl text-gray-200 max-w-2xl">
          {service.description}
        </p>
      </div>
    </div>
  </section>

  <!-- Overview Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-bold mb-6">Overview</h2>
        <p class="text-lg text-gray-700 mb-8">
          {service.longDescription}
        </p>

        <h3 class="text-2xl font-bold mb-4">Benefits</h3>
        <ul class="list-disc list-inside space-y-2 text-lg text-gray-700 mb-8">
          {Array.isArray(service.benefits)
            ? service.benefits.map((benefit: string) => (
                <li>{benefit}</li>
              ))
            : null
          }
        </ul>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-bold mb-12 text-center">Key Features</h2>

        <div class="space-y-12">
          {Array.isArray(service.features)
            ? service.features.map((feature: ServiceFeature, index: number) => (
            <div class="flex flex-col md:flex-row animate-on-scroll" style={{ transitionDelay: `${index * 0.1}s` }}>
              <div class="md:w-16 w-full flex-shrink-0 flex md:justify-center">
                <div class="w-12 h-12 bg-black text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 md:mb-0">
                  {index + 1}
                </div>
              </div>
              <div class="md:ml-8">
                <h3 class="text-xl font-bold mb-2">{feature.title}</h3>
                <p class="text-gray-700">{feature.description}</p>
              </div>
            </div>
          ))
            : null
          }
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl font-bold mb-6">Ready to Get Started?</h2>
        <p class="text-xl text-gray-700 mb-8">
          Contact us today to learn more about our {service.title} service and how it can benefit your organization.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="/contact"
            class="bg-black text-white px-6 py-3 rounded-md text-base font-medium hover:bg-gray-800 transition-colors"
          >
            Contact Us
          </a>
          <a
            href="/services"
            class="bg-white text-black border-2 border-black px-6 py-3 rounded-md text-base font-medium hover:bg-gray-100 transition-colors"
          >
            Explore Other Services
          </a>
        </div>
      </div>
    </div>
  </section>
</MainLayout>

<script>
  // Scroll animations
  document.addEventListener('DOMContentLoaded', () => {
    const animateOnScroll = document.querySelectorAll('.animate-on-scroll');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animated');
        }
      });
    }, { threshold: 0.1 });

    animateOnScroll.forEach(element => {
      observer.observe(element);
    });
  });
</script>
